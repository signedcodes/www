<html>
<head>
<title>signed.codes: {{.Signer.Login}}</title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="/static/picnic.min.css" />
<link rel="stylesheet" href="/static/sc.css" />
</head>
<body>
    <nav> 
        <a href="/" class="brand"><span>Signed Codes</span></a> 
        <input id="bmenu" type="checkbox" class="show"> 
        <label for="bmenu" class="burger toggle pseudo button">Menu</label> 
        <div class="menu"> 
            <a href="/signup" class="pseudo button">Sign your own code for donations</a> 
            <a href="/volunteer" class="pseudo button">Help out</a>
        </div>
    </nav>

    <main class="intro">
        <div class="visual flex one-900">


<p><img src="{{.Signer.Avatar}}" alt="{{.Signer.Name}}" width="200" height="200" /></p>

<p><a href="{{.Signer.Link}}">@{{.Signer.Login}}</a> ({{.Signer.Name}})</p>

{{range $snippet := .Signer.Snippets}}

<h2>Code</h2>
<pre>{{$snippet.Code}}</pre>

{{ if $snippet.Comment }}
<h2>Comment</h2>
<p>Comment from @{{$.Signer.Login}}: {{$snippet.Comment}}</p>
{{end}}

<h2>Preview</h2>

TODO: describe in sumptuous terms

{{if $snippet.PreviewURL}}
<a href="{{$snippet.RenderedURL}}">
<img src="{{$snippet.PreviewURL}}" alt="{{$snippet.Code}}" width="400" height="600" />
</a>
{{else}}
<p>Preview not available yet. A human somewhere is making it.</p>
{{end}}

<h2>Supporting</h2>

{{with $snippet.Fundraise}}

<p><a href="/donate/{{$.Signer.Login}}/{{$snippet.ID}}">Donate ${{$snippet.Amount}} USD (or more) to {{.Name}}</a>. {{if .USCitizenOnly}}<strong>Must be a US citizen to donate.</strong> {{end}}</p>

{{end}} {{/* with $snippet.Fundraise */}}

<p>{{$snippet.Available}} of {{$snippet.Quantity}} available</p>

{{if $snippet.Available}}
<a href="/donate/{{$.Signer.Login}}/{{$snippet.ID}}">Donate ${{.Amount}} now</a>
{{end}}

{{else}} {{/* range .Snippets */}}

<p>No signed codes available yet.</p>

{{end}} {{/* range .Snippets */}}


{{if .Signer.Owner}}

<hr/>

{{if .Signer.Snippets}}
<h2>Add another signed code</h2>
{{else}}
<h2>Add a signed code</h2>
{{end}}

<form method="POST">
{{ $.CSRF }}

<h2>Code</h2>

<p>Enter some code you wrote here. You may interpret "code" loosely.</p>
<p>Put something here that is your doing and that people will love.</p>

<textarea name="code" placeholder="your code here" rows="10" cols="120"/>
</textarea>

<h2>Comment</h2>

<p>(Optional) Whatever you write here will show up on the website only. Maybe explain what the code is, or its history.</p>

<p><input type="text" name="comment"></p>

<h2>Benefactor</h2>

Select who should benefit from donations.

Some options are only available if you are a US citizen due to campaign finance laws.

{{range .Fundraises}}
<p>
    <input id="{{.Slug}}" type="radio" name="fundraise" value="{{.Slug}}">
    <label for="{{.Slug}}"><a href="{{.Link}}">{{.Name}}</a>{{if .USCitizenOnly}}<strong> (US Citizens only)</strong>{{end}}
    </label>
</p>
{{end}} {{/* end range .Fundraises */}}

If you want to request a new benefactor, please email TODO-email-address.
We can add any organization or campaign found on <a href="https://secure.actblue.com/directory">ActBlue</a>.


<h2>Quantity and donation amount</h2>

<p>
<label for="quantity">Quantity available (min 1, max 100, recommended 10): </label>
<input type="text" name="quantity" id="quantity">
</p>


<p>
<label for="amount">Donation amount each in USD (min 50, max 2500, recommended 250): </label>
<input type="text" name="amount" id="amount">
</p>

<h2>Review</h2>

<p>None of this is editable after you hit submit, so double-check everything.</p>
<p>After you hit submit, we'll render your code. This involves a human, so it takes time.</p>
<p>We'll email you at your GitHub email address when the rendering is complete.</p>
<p>Later, we'll snail mail you copies to wet sign.</p>

<p>TODO more words and links etc about sharing</p>

<input type="submit" value="Submit"/>
</form>


{{ else }} {{/* if .Owner */}}

{{/* TODO: log in link if no current session?*/}}

{{end}} {{/* if .Owner */}}

</div>
</main>
<footer class="footer">
<div class="content">
    <p>&copy; 2020 Signed Codes</p>
</div>
</footer>
</body>
</html>
